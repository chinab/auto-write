<?xml version="1.0" encoding="UTF-8"?>
<!--
    - DispatcherServlet application context for Application's web tier.
-->
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:p="http://www.springframework.org/schema/p" xmlns:context="http://www.springframework.org/schema/context"
        xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
                http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd">

	<context:annotation-config />
	
<!-- 	<bean name="/login" class="com.autowrite.common.framework.controller.CommonController"/> -->
	
	<context:component-scan base-package="com.autowrite.common.framework.controller">
		<context:include-filter type="annotation" expression="org.springframework.stereotype.Controller" />
		<context:exclude-filter type="annotation" expression="org.springframework.stereotype.Service" />
		<context:exclude-filter type="annotation" expression="org.springframework.stereotype.Repository" />
	</context:component-scan>
	
<!--     <context:component-scan base-package="com.aircis.xii.admin.controller"> -->
<!--     </context:component-scan> -->
<!--     <context:component-scan base-package="com.b2bis.xii.components.http"> -->
       
<!--     </context:component-scan> -->
   
    <bean class="org.springframework.web.servlet.handler.SimpleMappingExceptionResolver">
        <property name="defaultErrorView" value="error/bizError"/>
        <property name="exceptionMappings">
            <props>
                <prop key="org.springframework.dao.DataAccessException">error/dataAccessFailure</prop>
                <prop key="org.springframework.transaction.TransactionException">error/transactionFailure</prop>
                <prop key="egovframework.rte.fdl.cmmn.exception.EgovBizException">error/egovBizException</prop>
            </props>
        </property>
    </bean>
    
    <bean class="org.springframework.web.servlet.view.UrlBasedViewResolver" p:order="1" 
    	p:viewClass="org.springframework.web.servlet.view.JstlView" 
    	p:prefix="/WEB-INF/jsp/" p:suffix=".jsp"/>

	<bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping">
		<property name="interceptors">
			<ref bean="commonInterceptor" />
		</property>
	</bean>
	
	<bean id="commonInterceptor" class="com.autowrite.common.framework.bean.CommonInterceptor">
		<property name="passInterceptor">
			<list>
				<value>register.do</value>
				<value>login.do</value>
				<value>dologin.do</value>
				<value>idDupCheck.do</value>
				<value>nicDupCheck.do</value>
				<value>getNotice.do</value>
				<value>file.receive.do</value>
				<value>jspView.do?jsp=index</value>
			</list>
		</property>
	</bean>

	<!-- Quartz 스케쥴러 시작 -->
	<!-- 스케쥴 팩토리 -->
	<!-- trigger 를 장착하고 실행시킨다. -->
	<bean class="org.springframework.scheduling.quartz.SchedulerFactoryBean"
		autowire="no">
		<property name="triggers">
			<list>
				<ref bean="ReserveTrigger" />
				<!--
				<ref bean="OcimsTrigger" />
				<ref bean="TestTrigger" />
				<ref bean="startRFCServerTrigger"/>
				<ref bean="BaronetTrigger" />
				<ref bean="doantcTrigger" />
				-->
			</list>
		</property>
	</bean>

	<!-- 크론 트리거 설정 -->
	<!--
		SimpleTriggerBean 과 CronTriggerBean 두가지를 쓸수 있는데 앞의 것은 몇분마다 실행 뭐 이럴 때
		스는 것이고... cronExpression은 매년 3월 2일 아니면 매일 새벽 1시 마다 실행등을 할 때 쓰인다.
		
		SimpleTriggerBean 은 주기를 설정하는 property 로 repeatInterval 를 갖고
		CronTriggerBean 은 주기를 설정하는 property 로 cronExpression 을 사용한다.
	-->
	<bean id="ReserveTrigger" class="org.springframework.scheduling.quartz.CronTriggerBean">
		<property name="jobDetail" ref="ReserveJob" />
		<property name="cronExpression" value="0 0/1 * * * ?" />
		<!-- 초,분,시,일,월,주의 일,년 -->
	</bean>

	<!-- 잡 설정 -->
	<bean id="ReserveJob" class="org.springframework.scheduling.quartz.JobDetailBean">
		<property name="jobClass" value="com.autowrite.scheduling.ReserveJob" />
	</bean>
	<!-- Quartz 스케쥴러 끝 -->
	
	<!-- 접속통계 작업 수행 Bean 설정 -->
<!-- 	<bean id="sysLogging" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean"> -->
<!-- 	    <property name="targetObject" ref="egovLogManageScheduling" /> -->
<!-- 	    <property name="targetMethod" value="sysLogSummary" /> -->
<!-- 	    <property name="concurrent" value="false" /> -->
<!-- 	</bean> -->
	
	<!-- 접속통계 트리거 Bean 설정 -->
<!-- 	<bean id="sysLogTrigger" class="org.springframework.scheduling.quartz.SimpleTriggerBean"> -->
<!-- 	    <property name="jobDetail" ref="sysLogging" /> -->
<!-- 	    <property name="startDelay" value="60000" /> -->
<!-- 	    <property name="repeatInterval" value="3600000" /> -->
<!-- 	</bean> -->
	
	<!-- 접속통계 스케줄러 Bean 설정 -->
<!-- 	<bean id="logSummaryScheduler" class="org.springframework.scheduling.quartz.SchedulerFactoryBean"> -->
<!-- 	    <property name="triggers"> -->
<!-- 	        <list> -->
<!-- 	            <ref bean="sysLogTrigger" /> -->
<!-- 	        </list> -->
<!-- 	    </property> -->
<!-- 	</bean> -->

    <!-- Integrated Apache Commons Validator by Spring Modules -->
    <!--
    <bean id="beanValidator" class="org.springmodules.validation.commons.DefaultBeanValidator">
        <property name="validatorFactory" ref="validatorFactory"/>
    </bean>

    <bean id="validatorFactory" class="org.springmodules.validation.commons.DefaultValidatorFactory">
        <property name="validationConfigLocations">
            <list>
                <value>/WEB-INF/config/egovframework/validator/validator-rules.xml</value>
                <value>/WEB-INF/config/egovframework/validator/validator.xml</value>
            </list>
        </property>
    </bean>

    <bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
        <property name="webBindingInitializer">
            <bean class="egovframework.edu.cmmn.web.EgovBindingInitializer"/>
        </property>
    </bean>

    <bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping"/>
 -->    
	<!-- /For Pagination Tag -->
</beans>